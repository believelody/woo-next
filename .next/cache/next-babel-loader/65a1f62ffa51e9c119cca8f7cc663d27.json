{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { productRawPrice } from \"./product.util\";\nexport var productInCart = function productInCart(cart, product) {\n  var productFound = cart.items.map();\n};\nexport var getCart = function getCart() {\n  if (localStorage) {\n    return JSON.parse(localStorage.getItem(\"woo-next-cart\"));\n  }\n\n  return null;\n};\nexport var createCart = function createCart(product, quantity, variationValue) {\n  var rawPrice = productRawPrice(product.price);\n  var indexVariation = product.variations.nodes.findIndex(function (variation) {\n    return variation.attributes.nodes[0].value === variationValue;\n  });\n\n  if (indexVariation > -1) {\n    var newProduct = {\n      quantity: quantity,\n      totalPrice: parseFloat((quantity * rawPrice).toFixed(2)),\n      variation: variationValue,\n      productVariation: product\n    };\n    var items = [newProduct];\n    var newCart = {\n      items: items,\n      totalProductsCount: 1,\n      totalProductsPrice: newProduct.totalPrice\n    };\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(newCart));\n    return newCart;\n  }\n\n  return null;\n};\nexport var updateCartByIndex = function updateCartByIndex(cart, index, quantity, variationValue) {\n  cart.items[index].quantity += quantity;\n  cart.items[index].variation = variationValue;\n  cart.items[index].totalPrice = parseFloat((rawPrice * cart.items[isProductMatchIndex].quantity).toFixed(2));\n  cart.totalProductsPrice = cart.items.reduce(function (acc, item) {\n    return acc + parseFloat(item.totalPrice);\n  }, 0);\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart));\n  return cart;\n};\nexport var updateCartByProduct = function updateCartByProduct(cart, product, quantity, variationValue) {\n  var rawPrice = productRawPrice(product.price);\n  var index = cart.items.find(function (item) {\n    return item.productVariation.name === product.name && item.variation === variationValue;\n  });\n\n  if (index > -1) {\n    return updateCartByIndex(cart, index, quantity, variationValue);\n  } else {\n    var items = [].concat(_toConsumableArray(cart.items), [{\n      quantity: quantity,\n      totalPrice: (quantity * rawPrice).toFixed(2),\n      productVariation: product,\n      variation: variationValue\n    }]);\n    var updatedCart = {\n      totalProductsPrice: items.reduce(function (acc, item) {\n        return acc + parseFloat(item.totalPrice);\n      }, 0),\n      totalProductsCount: cart.totalProductsCount + 1,\n      items: items\n    };\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart));\n    return updatedCart;\n  }\n};\nexport var removeItemFromCart = function removeItemFromCart(cart, indexProduct) {\n  if (cart.totalProductsCount - 1 === indexProduct) {\n    localStorage.removeItem(\"woo-next-cart\");\n    return null;\n  }\n\n  var updatedCart = {\n    items: cart.items.filter(function (item, index) {\n      return index !== indexProduct;\n    }),\n    totalProductsCount: cart.totalProductsCount - 1,\n    totalProductsPrice: cart.totalProductsPrice - cart.items[indexProduct].totalPrice\n  };\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart));\n  return updatedCart;\n};\nexport var removeCart = function removeCart() {\n  localStorage.removeItem(\"woo-next-cart\");\n  return null;\n};","map":{"version":3,"sources":["/home/yamakasi/nextjs/woo-next/utils/cart.util.js"],"names":["productRawPrice","productInCart","cart","product","productFound","items","map","getCart","localStorage","JSON","parse","getItem","createCart","quantity","variationValue","rawPrice","price","indexVariation","variations","nodes","findIndex","variation","attributes","value","newProduct","totalPrice","parseFloat","toFixed","productVariation","newCart","totalProductsCount","totalProductsPrice","setItem","stringify","updateCartByIndex","index","isProductMatchIndex","reduce","acc","item","updateCartByProduct","find","name","updatedCart","removeItemFromCart","indexProduct","removeItem","filter","removeCart"],"mappings":"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","sourcesContent":["import { productRawPrice } from \"./product.util\"\n\nexport const productInCart = (cart, product) => {\n    const productFound = cart.items.map()\n}\n\nexport const getCart = () => {\n    if (localStorage) {\n        return JSON.parse(localStorage.getItem(\"woo-next-cart\"))\n    }\n    return null\n}\n\nexport const createCart = (product, quantity, variationValue) => {\n    let rawPrice = productRawPrice(product.price)\n    let indexVariation = product.variations.nodes.findIndex(variation => variation.attributes.nodes[0].value === variationValue)\n    if (indexVariation > -1) {\n        const newProduct = {\n            quantity,\n            totalPrice: parseFloat((quantity * rawPrice).toFixed(2)),\n            variation: variationValue,\n            productVariation: product\n        }\n        const items = [newProduct]\n        const newCart = {\n            items,\n            totalProductsCount: 1,\n            totalProductsPrice: newProduct.totalPrice,\n        }\n        localStorage.setItem(\"woo-next-cart\", JSON.stringify(newCart))\n        return newCart\n    }\n    return null\n}\n\nexport const updateCartByIndex = (cart, index, quantity, variationValue) => {\n    cart.items[index].quantity += quantity\n    cart.items[index].variation = variationValue\n    cart.items[index].totalPrice = parseFloat((rawPrice * cart.items[isProductMatchIndex].quantity).toFixed(2))\n    cart.totalProductsPrice = cart.items.reduce((acc, item) => acc + parseFloat(item.totalPrice), 0)\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart))\n    return cart\n}\n\nexport const updateCartByProduct = (cart, product,quantity, variationValue) => {\n    const rawPrice = productRawPrice(product.price)\n    const index = cart.items.find(item => item.productVariation.name === product.name && item.variation === variationValue)\n    if (index > -1) {\n        return updateCartByIndex(cart, index, quantity, variationValue)\n    }\n    else {\n        let items = [\n            ...cart.items,\n            {\n                quantity,\n                totalPrice: (quantity * rawPrice).toFixed(2),\n                productVariation: product,\n                variation: variationValue\n            }                           \n        ]\n\n        const updatedCart = {\n            totalProductsPrice: items.reduce((acc, item) => acc + parseFloat(item.totalPrice), 0),\n            totalProductsCount: cart.totalProductsCount + 1,\n            items\n        }\n        localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart))\n        return updatedCart\n    }\n}\n\nexport const removeItemFromCart = (cart, indexProduct) => {\n    if (cart.totalProductsCount - 1 === indexProduct) {\n        localStorage.removeItem(\"woo-next-cart\")\n        return null\n    }\n    const updatedCart = {\n        items: cart.items.filter((item, index) => index !== indexProduct),\n        totalProductsCount: cart.totalProductsCount - 1,\n        totalProductsPrice: cart.totalProductsPrice - cart.items[indexProduct].totalPrice\n    }\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart))\n    return updatedCart\n}\n\nexport const removeCart = () => {\n    localStorage.removeItem(\"woo-next-cart\")\n    return null\n}"]},"metadata":{},"sourceType":"module"}
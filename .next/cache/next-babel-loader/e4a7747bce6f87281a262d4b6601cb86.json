{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { productRawPrice } from \"./product.util\";\nexport var productInCart = function productInCart(cart, product, variation) {\n  return cart.items.findIndex(function (item) {\n    return item.variation === variation && item.productVariation.id === product.id;\n  });\n};\nexport var getCart = function getCart() {\n  if (localStorage) {\n    return JSON.parse(localStorage.getItem(\"woo-next-cart\"));\n  }\n\n  return null;\n};\nexport var createCart = function createCart(product, quantity, variationValue) {\n  var rawPrice = productRawPrice(product.price);\n  var indexVariation = product.variations.nodes.findIndex(function (variation) {\n    return variation.attributes.nodes[0].value === variationValue;\n  });\n\n  if (indexVariation > -1) {\n    var newProduct = {\n      quantity: quantity,\n      totalPrice: parseFloat(quantity * rawPrice),\n      variation: variationValue,\n      productVariation: product\n    };\n    var items = [newProduct];\n    var newCart = {\n      items: items,\n      totalProductsCount: 1,\n      totalProductsPrice: newProduct.totalPrice\n    };\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(newCart));\n    return newCart;\n  }\n\n  return null;\n};\nexport var updateCartByIndex = function updateCartByIndex(cart, index, quantity) {\n  var rawPrice = productRawPrice(cart.items[index].productVariation.price);\n  cart.items[index].quantity = quantity;\n  cart.items[index].totalPrice = parseFloat(rawPrice * cart.items[index].quantity);\n  cart.totalProductsPrice = cart.items.reduce(function (acc, item) {\n    return acc + item.totalPrice;\n  }, 0);\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart));\n  return cart;\n};\nexport var updateCartItemByIndex = function updateCartItemByIndex(cart, index, quantity) {\n  var rawPrice = productRawPrice(cart.items[index].productVariation.price);\n  cart.items[index].quantity = quantity;\n  cart.items[index].totalPrice = parseFloat(rawPrice * cart.items[index].quantity);\n  cart.totalProductsPrice = cart.items.reduce(function (acc, item) {\n    return acc + item.totalPrice;\n  }, 0);\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart));\n  return cart;\n};\nexport var updateCartWithNewProduct = function updateCartWithNewProduct(cart, product, quantity, variationValue) {\n  var rawPrice = productRawPrice(product.price);\n  var items = [].concat(_toConsumableArray(cart.items), [{\n    quantity: quantity,\n    totalPrice: parseFloat(quantity * rawPrice),\n    productVariation: product,\n    variation: variationValue\n  }]);\n  var updatedCart = {\n    totalProductsPrice: items.reduce(function (acc, item) {\n      return acc + item.totalPrice;\n    }, 0),\n    totalProductsCount: cart.totalProductsCount + 1,\n    items: items\n  };\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart));\n  return updatedCart;\n};\nexport var removeItemFromCart = function removeItemFromCart(cart, indexProduct) {\n  if (cart.totalProductsCount === 1) {\n    localStorage.removeItem(\"woo-next-cart\");\n    return null;\n  }\n\n  var updatedCart = {\n    items: cart.items.filter(function (item, index) {\n      return index !== indexProduct;\n    }),\n    totalProductsCount: cart.totalProductsCount - 1,\n    totalProductsPrice: cart.totalProductsPrice - cart.items[indexProduct].totalPrice\n  };\n  localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart));\n  return updatedCart;\n};\nexport var removeCart = function removeCart() {\n  localStorage.removeItem(\"woo-next-cart\");\n  return null;\n};","map":{"version":3,"sources":["/home/yamakasi/nextjs/woo-next/utils/cart.util.js"],"names":["productRawPrice","productInCart","cart","product","variation","items","findIndex","item","productVariation","id","getCart","localStorage","JSON","parse","getItem","createCart","quantity","variationValue","rawPrice","price","indexVariation","variations","nodes","attributes","value","newProduct","totalPrice","parseFloat","newCart","totalProductsCount","totalProductsPrice","setItem","stringify","updateCartByIndex","index","reduce","acc","updateCartItemByIndex","updateCartWithNewProduct","updatedCart","removeItemFromCart","indexProduct","removeItem","filter","removeCart"],"mappings":"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","sourcesContent":["import { productRawPrice } from \"./product.util\"\n\nexport const productInCart = (cart, product, variation) => {\n    return cart.items.findIndex(item => item.variation === variation && item.productVariation.id === product.id)\n}\n\nexport const getCart = () => {\n    if (localStorage) {\n        return JSON.parse(localStorage.getItem(\"woo-next-cart\"))\n    }\n    return null\n}\n\nexport const createCart = (product, quantity, variationValue) => {\n    let rawPrice = productRawPrice(product.price)\n    let indexVariation = product.variations.nodes.findIndex(variation => variation.attributes.nodes[0].value === variationValue)\n    if (indexVariation > -1) {\n        const newProduct = {\n            quantity,\n            totalPrice: parseFloat(quantity * rawPrice),\n            variation: variationValue,\n            productVariation: product\n        }\n        const items = [newProduct]\n        const newCart = {\n            items,\n            totalProductsCount: 1,\n            totalProductsPrice: newProduct.totalPrice,\n        }\n        localStorage.setItem(\"woo-next-cart\", JSON.stringify(newCart))\n        return newCart\n    }\n    return null\n}\n\nexport const updateCartByIndex = (cart, index, quantity) => {\n    const rawPrice = productRawPrice(cart.items[index].productVariation.price)\n    cart.items[index].quantity = quantity\n    cart.items[index].totalPrice = parseFloat(rawPrice * cart.items[index].quantity)\n    cart.totalProductsPrice = cart.items.reduce((acc, item) => acc + item.totalPrice, 0)\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart))\n    return cart\n}\n\nexport const updateCartItemByIndex = (cart, index, quantity) => {\n    const rawPrice = productRawPrice(cart.items[index].productVariation.price)\n    cart.items[index].quantity = quantity\n    cart.items[index].totalPrice = parseFloat(rawPrice * cart.items[index].quantity)\n    cart.totalProductsPrice = cart.items.reduce((acc, item) => acc + item.totalPrice, 0)\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(cart))\n    return cart\n}\n\nexport const updateCartWithNewProduct = (cart, product,quantity, variationValue) => {\n    const rawPrice = productRawPrice(product.price)\n    let items = [\n        ...cart.items,\n        {\n            quantity,\n            totalPrice: parseFloat(quantity * rawPrice),\n            productVariation: product,\n            variation: variationValue\n        }                           \n    ]\n\n    const updatedCart = {\n        totalProductsPrice: items.reduce((acc, item) => acc + item.totalPrice, 0),\n        totalProductsCount: cart.totalProductsCount + 1,\n        items\n    }\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart))\n    return updatedCart\n}\n\nexport const removeItemFromCart = (cart, indexProduct) => {\n    if (cart.totalProductsCount === 1) {\n        localStorage.removeItem(\"woo-next-cart\")\n        return null\n    }\n    const updatedCart = {\n        items: cart.items.filter((item, index) => index !== indexProduct),\n        totalProductsCount: cart.totalProductsCount - 1,\n        totalProductsPrice: cart.totalProductsPrice - cart.items[indexProduct].totalPrice\n    }\n    localStorage.setItem(\"woo-next-cart\", JSON.stringify(updatedCart))\n    return updatedCart\n}\n\nexport const removeCart = () => {\n    localStorage.removeItem(\"woo-next-cart\")\n    return null\n}"]},"metadata":{},"sourceType":"module"}
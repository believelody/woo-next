{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nexport var createCart = function createCart(product, quantity, variationValue) {\n  var rawPrice = parseFloat(product.price.replace(\",\", \".\").substring(1));\n  var indexVariation = product.variations.nodes.findIndex(function (variation) {\n    return variation.attributes.nodes[0].value === variationValue;\n  });\n\n  if (indexVariation > -1) {\n    var newProduct = {\n      quantity: quantity,\n      totalPrice: (quantity * rawPrice).toFixed(2),\n      variation: variationValue,\n      productVariation: product\n    };\n    var items = [newProduct];\n    return {\n      items: items,\n      totalProductsCount: 1,\n      totalProductsPrice: newProduct.totalPrice\n    };\n  }\n\n  return null;\n};\nexport var updateCart = function updateCart(cart, product, quantity, variationValue) {\n  var isProductMatchIndex = cart.items.findIndex(function (item) {\n    return item.variation === variationValue;\n  });\n  var rawPrice = parseFloat(product.price.replace(\",\", \".\").substring(1));\n\n  if (isProductMatchIndex > -1) {\n    cart.items[isProductMatchIndex].quantity += quantity;\n    cart.items[isProductMatchIndex].totalPrice = (rawPrice * cart[isProductMatchIndex].quantity).toFixed(2);\n    return cart;\n  } else {\n    return {\n      totalProductsPrice: cart.items.reduce(function (acc, item) {\n        return acc + parseFloat(item.totalPrice);\n      }, 0),\n      totalProductsCount: cart.totalProductsCount + 1,\n      items: [].concat(_toConsumableArray(cart.items), [{\n        quantity: quantity,\n        totalPrice: (quantity * rawPrice).toFixed(2),\n        productVariation: product,\n        variation: variationValue\n      }])\n    };\n  }\n};","map":{"version":3,"sources":["/home/yamakasi/nextjs/woo-next/utils/cart.util.js"],"names":["createCart","product","quantity","variationValue","rawPrice","parseFloat","price","replace","substring","indexVariation","variations","nodes","findIndex","variation","attributes","value","newProduct","totalPrice","toFixed","productVariation","items","totalProductsCount","totalProductsPrice","updateCart","cart","isProductMatchIndex","item","reduce","acc"],"mappings":";AAAA,OAAO,IAAMA,UAAU,GAAG,SAAbA,UAAa,CAACC,OAAD,EAAUC,QAAV,EAAoBC,cAApB,EAAuC;AAC7D,MAAIC,QAAQ,GAAGC,UAAU,CAACJ,OAAO,CAACK,KAAR,CAAcC,OAAd,CAAsB,GAAtB,EAA2B,GAA3B,EAAgCC,SAAhC,CAA0C,CAA1C,CAAD,CAAzB;AACA,MAAIC,cAAc,GAAGR,OAAO,CAACS,UAAR,CAAmBC,KAAnB,CAAyBC,SAAzB,CAAmC,UAAAC,SAAS;AAAA,WAAIA,SAAS,CAACC,UAAV,CAAqBH,KAArB,CAA2B,CAA3B,EAA8BI,KAA9B,KAAwCZ,cAA5C;AAAA,GAA5C,CAArB;;AACA,MAAIM,cAAc,GAAG,CAAC,CAAtB,EAAyB;AACrB,QAAMO,UAAU,GAAG;AACfd,MAAAA,QAAQ,EAARA,QADe;AAEfe,MAAAA,UAAU,EAAE,CAACf,QAAQ,GAAGE,QAAZ,EAAsBc,OAAtB,CAA8B,CAA9B,CAFG;AAGfL,MAAAA,SAAS,EAAEV,cAHI;AAIfgB,MAAAA,gBAAgB,EAAElB;AAJH,KAAnB;AAMA,QAAMmB,KAAK,GAAG,CAACJ,UAAD,CAAd;AACA,WAAO;AACHI,MAAAA,KAAK,EAALA,KADG;AAEHC,MAAAA,kBAAkB,EAAE,CAFjB;AAGHC,MAAAA,kBAAkB,EAAEN,UAAU,CAACC;AAH5B,KAAP;AAKH;;AACD,SAAO,IAAP;AACH,CAlBM;AAoBP,OAAO,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAAOvB,OAAP,EAAgBC,QAAhB,EAA0BC,cAA1B,EAA6C;AACnE,MAAMsB,mBAAmB,GAAGD,IAAI,CAACJ,KAAL,CAAWR,SAAX,CAAqB,UAAAc,IAAI;AAAA,WAAIA,IAAI,CAACb,SAAL,KAAmBV,cAAvB;AAAA,GAAzB,CAA5B;AACA,MAAIC,QAAQ,GAAGC,UAAU,CAACJ,OAAO,CAACK,KAAR,CAAcC,OAAd,CAAsB,GAAtB,EAA2B,GAA3B,EAAgCC,SAAhC,CAA0C,CAA1C,CAAD,CAAzB;;AACA,MAAIiB,mBAAmB,GAAG,CAAC,CAA3B,EAA8B;AAC1BD,IAAAA,IAAI,CAACJ,KAAL,CAAWK,mBAAX,EAAgCvB,QAAhC,IAA4CA,QAA5C;AACAsB,IAAAA,IAAI,CAACJ,KAAL,CAAWK,mBAAX,EAAgCR,UAAhC,GAA6C,CAACb,QAAQ,GAAGoB,IAAI,CAACC,mBAAD,CAAJ,CAA0BvB,QAAtC,EAAgDgB,OAAhD,CAAwD,CAAxD,CAA7C;AACA,WAAOM,IAAP;AACH,GAJD,MAKK;AACD,WAAO;AACHF,MAAAA,kBAAkB,EAAEE,IAAI,CAACJ,KAAL,CAAWO,MAAX,CAAkB,UAACC,GAAD,EAAMF,IAAN;AAAA,eAAeE,GAAG,GAAGvB,UAAU,CAACqB,IAAI,CAACT,UAAN,CAA/B;AAAA,OAAlB,EAAoE,CAApE,CADjB;AAEHI,MAAAA,kBAAkB,EAAEG,IAAI,CAACH,kBAAL,GAA0B,CAF3C;AAGHD,MAAAA,KAAK,+BACEI,IAAI,CAACJ,KADP,IAED;AACIlB,QAAAA,QAAQ,EAARA,QADJ;AAEIe,QAAAA,UAAU,EAAE,CAACf,QAAQ,GAAGE,QAAZ,EAAsBc,OAAtB,CAA8B,CAA9B,CAFhB;AAGIC,QAAAA,gBAAgB,EAAElB,OAHtB;AAIIY,QAAAA,SAAS,EAAEV;AAJf,OAFC;AAHF,KAAP;AAaH;AACJ,CAvBM","sourcesContent":["export const createCart = (product, quantity, variationValue) => {\n    let rawPrice = parseFloat(product.price.replace(\",\", \".\").substring(1))\n    let indexVariation = product.variations.nodes.findIndex(variation => variation.attributes.nodes[0].value === variationValue)\n    if (indexVariation > -1) {\n        const newProduct = {\n            quantity,\n            totalPrice: (quantity * rawPrice).toFixed(2),\n            variation: variationValue,\n            productVariation: product\n        }\n        const items = [newProduct]\n        return {\n            items,\n            totalProductsCount: 1,\n            totalProductsPrice: newProduct.totalPrice,\n        }\n    }\n    return null\n}\n\nexport const updateCart = (cart, product, quantity, variationValue) => {\n    const isProductMatchIndex = cart.items.findIndex(item => item.variation === variationValue)\n    let rawPrice = parseFloat(product.price.replace(\",\", \".\").substring(1))\n    if (isProductMatchIndex > -1) {\n        cart.items[isProductMatchIndex].quantity += quantity\n        cart.items[isProductMatchIndex].totalPrice = (rawPrice * cart[isProductMatchIndex].quantity).toFixed(2)\n        return cart\n    }\n    else {\n        return {\n            totalProductsPrice: cart.items.reduce((acc, item) => acc + parseFloat(item.totalPrice), 0),\n            totalProductsCount: cart.totalProductsCount + 1,\n            items: [\n                ...cart.items,\n                {\n                    quantity,\n                    totalPrice: (quantity * rawPrice).toFixed(2),\n                    productVariation: product,\n                    variation: variationValue\n                }\n            ]\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}